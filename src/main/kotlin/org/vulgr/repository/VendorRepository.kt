package org.vulgr.repository

import org.springframework.data.neo4j.annotation.Depth
import org.springframework.data.neo4j.annotation.Query
import org.springframework.data.neo4j.repository.Neo4jRepository
import org.springframework.data.repository.query.Param
import org.springframework.stereotype.Repository

@Repository
interface VendorRepository : Neo4jRepository<Cve, Long> {
    @Depth(0)
    @Query("MATCH (v:Vendor {vendorId: {vendorId}})-[owns:Owns]->(p:Product) return p,owns,v limit {limit}")
    fun getProductsOwnedByVendor(@Param("vendorId") vendorId: String, @Param("limit") limit: Int): List<ProductEntity>
}